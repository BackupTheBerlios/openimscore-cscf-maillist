<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [OpenIMSCore-CSCF] SCSCF sending 403 error when an AS change the	Request URI of anINVITE
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openimscore-cscf/2008-February/index.html" >
   <LINK REL="made" HREF="mailto:openimscore-cscf%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-CSCF%5D%20SCSCF%20sending%20403%20error%20when%20an%20AS%20change%20the%0A%09Request%20URI%20of%20anINVITE&In-Reply-To=%3C1204288630.5664.14.camel%40peer1%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001209.html">
   <LINK REL="Next"  HREF="001214.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[OpenIMSCore-CSCF] SCSCF sending 403 error when an AS change the	Request URI of anINVITE</H1>
    <B>Enrique de Meer</B> 
    <A HREF="mailto:openimscore-cscf%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-CSCF%5D%20SCSCF%20sending%20403%20error%20when%20an%20AS%20change%20the%0A%09Request%20URI%20of%20anINVITE&In-Reply-To=%3C1204288630.5664.14.camel%40peer1%3E"
       TITLE="[OpenIMSCore-CSCF] SCSCF sending 403 error when an AS change the	Request URI of anINVITE">enrique.demeer at inycom.es
       </A><BR>
    <I>Fri Feb 29 13:37:10 CET 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001209.html">[OpenIMSCore-CSCF] [SVN-ser_ims] r533 - Applied the patch from	Roberto Luis Paradinha for actually updating the dialog	timers. Used on both S-CSCF and P-CSCF.
</A></li>
        <LI>Next message: <A HREF="001214.html">[OpenIMSCore-CSCF] SCSCF sending 403 error when an AS change the	Request URI of anINVITE
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1212">[ date ]</a>
              <a href="thread.html#1212">[ thread ]</a>
              <a href="subject.html#1212">[ subject ]</a>
              <a href="author.html#1212">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi all,

I&#180;ve been trying to execute an example that i've read in the book &quot;3G IP
Multimedia Subsystem IMS&quot; with OpenIMScore. In chapter 5.8. &quot;Application
Servers: providing services to users&quot; there is &quot;An example of service
execution&quot; in which i read that a service can automatically diverts a
session setup attempt to an answering machine (e.g., MRF). 

In my scenario i want to redirect the invite depending on a callee
condition (the callee has a service by which he recieves the call or not
depending on the call time, and if not, the call is redirected to a
answering machine to make the caller to hear an audio message) but i
think the situation is more or less the same.

In the book:   The AS contains the logic to provide the diversion
service to the MRFC, instructing the MRFC to play a pre-recorded
announcement. The AS replaces the Request-URI of the SIP INVITE request
with the SIP URI of the MRFC. The AS honors the Route header in the
received INVITE request and forwards the INVITE request to the S-CSCF.
The S-CSCF detects that the Request-URI has changed with respect to the
INVITE request initially received, so it does not assess other possible
filter criteria. Instead, it forwards the request to its new
destination: in this case the MRFC.

Here it is my problem. I replace in the AS the Request-URI of the SIP
INVITE request with the SIP URI of the MRFC in the AS, and the AS sends
the INVITE to the SCSCF, but then the SCSCF responses to the AS with a
&quot;403 - Forbidden&quot;.


Does anybody know why? Any help?

I send the wireshark trace in the core:
192.168.11.3 is the core (4060 P, 5060 I, 6060 S)
192.168.11.12:5061 is the client
192.168.11.12:5060 is the AS

Thanks a lot in advance

Regards, Enrique

AVISO LEGAL 

Este mensaje y los archivos que en su caso lleve adjuntos son privados y confidenciales y se dirigen exclusivamente a su destinatario. Por ello, se informa a quien lo reciba por error que la informaci&#243;n contenida en el mismo es reservada y su utilizaci&#243;n, copia o distribuci&#243;n est&#225; prohibida, por lo que en tal caso le rogamos que nos lo comunique por esta misma v&#237;a o por tel&#233;fono (+34976013300) y proceda a borrarlo de inmediato. 



-------------- next part --------------
A non-text attachment was scrubbed...
Name: IMScore_enrique.pcap
Type: application/octet-stream
Size: 14783 bytes
Desc: not available
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/openimscore-cscf/attachments/20080229/09422f6d/attachment.obj">https://lists.berlios.de/pipermail/openimscore-cscf/attachments/20080229/09422f6d/attachment.obj</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001209.html">[OpenIMSCore-CSCF] [SVN-ser_ims] r533 - Applied the patch from	Roberto Luis Paradinha for actually updating the dialog	timers. Used on both S-CSCF and P-CSCF.
</A></li>
	<LI>Next message: <A HREF="001214.html">[OpenIMSCore-CSCF] SCSCF sending 403 error when an AS change the	Request URI of anINVITE
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1212">[ date ]</a>
              <a href="thread.html#1212">[ thread ]</a>
              <a href="subject.html#1212">[ subject ]</a>
              <a href="author.html#1212">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openimscore-cscf">More information about the OpenIMSCore-CSCF
mailing list</a><br>
</body></html>
