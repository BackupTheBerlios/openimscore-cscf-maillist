<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [OpenIMSCore-CSCF] [Serusers] loose_route behaviour, detecting single Route with myself
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openimscore-cscf/2007-June/index.html" >
   <LINK REL="made" HREF="mailto:openimscore-cscf%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-CSCF%5D%20%5BSerusers%5D%20loose_route%20behaviour%2C%0A%20detecting%20single%20Route%20with%20myself&In-Reply-To=%3C467A4B20.4000909%40teigre.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000749.html">
   <LINK REL="Next"  HREF="000746.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[OpenIMSCore-CSCF] [Serusers] loose_route behaviour, detecting single Route with myself</H1>
    <B>Greger V. Teigre</B> 
    <A HREF="mailto:openimscore-cscf%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-CSCF%5D%20%5BSerusers%5D%20loose_route%20behaviour%2C%0A%20detecting%20single%20Route%20with%20myself&In-Reply-To=%3C467A4B20.4000909%40teigre.com%3E"
       TITLE="[OpenIMSCore-CSCF] [Serusers] loose_route behaviour, detecting single Route with myself">greger at teigre.com
       </A><BR>
    <I>Thu Jun 21 11:55:44 CEST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000749.html">[OpenIMSCore-CSCF] loose_route behaviour, detecting single Route with myself
</A></li>
        <LI>Next message: <A HREF="000746.html">[OpenIMSCore-CSCF] [SVN-ser_ims] r324 - Added missing svn	properties.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#770">[ date ]</a>
              <a href="thread.html#770">[ thread ]</a>
              <a href="subject.html#770">[ subject ]</a>
              <a href="author.html#770">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>If there's a single Route header pointing to itself, then this is a good 
indication that a UA added a Route to your proxy as an outbound proxy.
If SER correctly identities the uri as itself, it should AFAIK return false.
Could you please turn on debugging and then look for loose_route and 
after_loose debug messages in the logs and post them?
g-)

JF wrote:
&gt;<i> Hi all,
</I>&gt;<i>
</I>&gt;<i> When SER receives an INVITE with a single Route header pointing to
</I>&gt;<i> itself, it's supposed to delete it and process the message as if no
</I>&gt;<i> Route header was there in the first place. This is what RFC3261
</I>&gt;<i> mandates, right?
</I>&gt;<i>
</I>&gt;<i> But currently the loose_route function returns true to the script in
</I>&gt;<i> this case, just like when more Route headers are present.
</I>&gt;<i>
</I>&gt;<i> So I have some routing logic for when no Route headers are present,
</I>&gt;<i> and if I want to apply the same routing logic to the case when there
</I>&gt;<i> is a single Route header pointing to myself (naturally, as it's the
</I>&gt;<i> same as if no Route header was present), I currently have to replicate
</I>&gt;<i> the same routing logic inside the if (loose_route())...
</I>&gt;<i>
</I>&gt;<i> Or is there an other way? Do I have to develop my own module function
</I>&gt;<i> or use some regexp search from the script to detect if there are more
</I>&gt;<i> Routes besides myself before I call loose_route?
</I>&gt;<i>
</I>&gt;<i> The best would be to change loose_route to return false and just
</I>&gt;<i> remove the Route header pointing to myself when there are no more
</I>&gt;<i> Route headers in the message... what do you think?
</I>&gt;<i>
</I>&gt;<i> JF
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Serusers mailing list
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-cscf">Serusers at lists.iptel.org</A>
</I>&gt;<i> <A HREF="http://lists.iptel.org/mailman/listinfo/serusers">http://lists.iptel.org/mailman/listinfo/serusers</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>   
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000749.html">[OpenIMSCore-CSCF] loose_route behaviour, detecting single Route with myself
</A></li>
	<LI>Next message: <A HREF="000746.html">[OpenIMSCore-CSCF] [SVN-ser_ims] r324 - Added missing svn	properties.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#770">[ date ]</a>
              <a href="thread.html#770">[ thread ]</a>
              <a href="subject.html#770">[ subject ]</a>
              <a href="author.html#770">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openimscore-cscf">More information about the OpenIMSCore-CSCF
mailing list</a><br>
</body></html>
