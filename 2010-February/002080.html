<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [OpenIMSCore-CSCF] 2. Re: About pcc, p-cscf crash (Min Wang)
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openimscore-cscf/2010-February/index.html" >
   <LINK REL="made" HREF="mailto:openimscore-cscf%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-CSCF%5D%202.%20Re%3A%20About%20pcc%2C%20p-cscf%20crash%20%28Min%20Wang%29&In-Reply-To=%3C1265710779.31120.11.camel%40localhost%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002076.html">
   <LINK REL="Next"  HREF="002087.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[OpenIMSCore-CSCF] 2. Re: About pcc, p-cscf crash (Min Wang)</H1>
    <B>Andreea Ancuta Onofrei</B> 
    <A HREF="mailto:openimscore-cscf%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-CSCF%5D%202.%20Re%3A%20About%20pcc%2C%20p-cscf%20crash%20%28Min%20Wang%29&In-Reply-To=%3C1265710779.31120.11.camel%40localhost%3E"
       TITLE="[OpenIMSCore-CSCF] 2. Re: About pcc, p-cscf crash (Min Wang)">andreea.ancuta.onofrei at fokus.fraunhofer.de
       </A><BR>
    <I>Tue Feb  9 11:19:39 CET 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="002076.html">[OpenIMSCore-CSCF] 2. Re: About pcc, p-cscf crash (Min Wang)
</A></li>
        <LI>Next message: <A HREF="002087.html">[OpenIMSCore-CSCF] 2. Re: About pcc, p-cscf crash (Min Wang)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2080">[ date ]</a>
              <a href="thread.html#2080">[ thread ]</a>
              <a href="subject.html#2080">[ subject ]</a>
              <a href="author.html#2080">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello Min,

I have added a parameter to the pcscf so that it can ignore the ports.
The specification TS 29.213 says that ports should be used so the PCRF
should support ports.

We are testing the Open IMS Core with our new testbed: OpenEPC.
You can find more information about our toolkit on:
<A HREF="http://www.openepc.net/en/openepc/overview/openEPC/index.html">http://www.openepc.net/en/openepc/overview/openEPC/index.html</A>
<A HREF="http://www.openepc.net/en/openepc/events/2010/index.html">http://www.openepc.net/en/openepc/events/2010/index.html</A>

and...information about releases:
<A HREF="http://www.openepc.net/en/openepc/overview/releases/index.html">http://www.openepc.net/en/openepc/overview/releases/index.html</A>

Enjoy the documentation,
Ancuta

PS: I will add something to handle the error code for registrations, but
it will take a while. Until then you are now able to test the &quot;ok&quot; case.
Any ideas and feedback is welcome.

On Mon, 2010-02-08 at 18:03 +0100, Min Wang wrote:
&gt;<i> Hi Ancuta:
</I>&gt;<i> 
</I>&gt;<i> Thanks.
</I>&gt;<i>  
</I>&gt;<i> &gt; Some of the problems have been fixed, regarding the terminating leg
</I>&gt;<i> PCC
</I>&gt;<i> &gt; stuff.
</I>&gt;<i> &gt; Handling the error code of the AAA is one of our target, so further
</I>&gt;<i> &gt; fixes will come soon :).
</I>&gt;<i> 
</I>&gt;<i> That would be great. Please let us know when you are done, so we can
</I>&gt;<i> start to test.
</I>&gt;<i> 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; @Min: the only thing that could have triggered the error code that you
</I>&gt;<i> &gt; receive is that the ports of the flows are now also sent.
</I>&gt;<i> &gt; For example, the log is pretty straight forward:
</I>&gt;<i> &gt; DBG:P-CSCF:PCC_create_media_component: first flow is permit out ip
</I>&gt;<i> from
</I>&gt;<i> &gt; 127.0.0.1 4060 to 127.0.0.1 9080
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; This is not a problem regarding Open IMS Core, but it is probably the
</I>&gt;<i> &gt; PCRF you are using that is not able to handle the ports as well.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> I am using uct pcrf for testing, here is the log, probably because of
</I>&gt;<i> the adding flow port, the uct pcrf is broken seem the Dest IP is empty.
</I>&gt;<i> 
</I>&gt;<i> What kind of pcrf are you using?
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> INFO: Received AAR DIAMETER message from P-CSCF
</I>&gt;<i> DEBUG: Session ID: pcscf.centercall.net;4000988146;3
</I>&gt;<i> DEBUG: Orig Realm: centercall.net
</I>&gt;<i> DEBUG: Dest Realm: centercall.net
</I>&gt;<i> DEBUG: Media Component Number: 1
</I>&gt;<i> DEBUG: Flow Number: 1
</I>&gt;<i> DEBUG: Flow Description: permit out ip from 67.154.255.47 63556 to
</I>&gt;<i> 172.16.8.43 34822
</I>&gt;<i> DEBUG: Source IP: 67.154.255.47
</I>&gt;<i> DEBUG: Dest IP: to
</I>&gt;<i> DEBUG: Flow Description: permit in ip from 172.16.8.43 34822 to
</I>&gt;<i> 67.154.255.47 63556
</I>&gt;<i> DEBUG: Flow Number: 2
</I>&gt;<i> DEBUG: Flow Description: permit out ip from 67.154.255.47 63557 to
</I>&gt;<i> 172.16.8.43 34823
</I>&gt;<i> DEBUG: Source IP: 67.154.255.47
</I>&gt;<i> DEBUG: Dest IP: to
</I>&gt;<i> DEBUG: Flow Description: permit in ip from 172.16.8.43 34823 to
</I>&gt;<i> 67.154.255.47 63557
</I>&gt;<i> DEBUG: session id; originating realm; destination realm
</I>&gt;<i> DEBUG: pcscf.centercall.net;4000988146;3;centercall.net;centercall.net
</I>&gt;<i> DEBUG: session id; flow id; source ip; dest ip; source port; dest port;
</I>&gt;<i> usage; status; BW ul; BW dl; QoS class; Media Type
</I>&gt;<i> DEBUG:
</I>&gt;<i> pcscf.centercall.net;4000988146;3;1,1;67.154.255.47;to;172.16.8.43;34822
</I>&gt;<i> ;63556;0;2;-1;-1;2;0
</I>&gt;<i> DEBUG:
</I>&gt;<i> pcscf.centercall.net;4000988146;3;1,2;67.154.255.47;to;172.16.8.43;34823
</I>&gt;<i> ;63557;1;2;-1;-1;2;0
</I>&gt;<i> DEBUG: Codecs: 0;8;3;101
</I>&gt;<i> INFO: Codecs authorised
</I>&gt;<i> INFO: Originating and Destination Domains authorised
</I>&gt;<i> Exception in thread &quot;Thread-2&quot; java.lang.NullPointerException
</I>&gt;<i>         at pcrf.xcap.getIPFlows(xcap.java:1219)
</I>&gt;<i>         at
</I>&gt;<i> pcrf.DecisionEngine.termination_request(DecisionEngine.java:548)
</I>&gt;<i>         at
</I>&gt;<i> de.fhg.fokus.pcrf_diam.rx.STRCommandListener.recvMessage(STRCommandListe
</I>&gt;<i> ner.java:145)
</I>&gt;<i>         at
</I>&gt;<i> de.fhg.fokus.diameter.DiameterPeer.DiameterWorker.run(DiameterWorker.jav
</I>&gt;<i> a:100)
</I>&gt;<i> INFO: Session ID: pcscf.centercall.net;4000988146;2 does not exist
</I>&gt;<i> 
</I>&gt;<i> INFO: Mon Feb 08 11:33:48 EST 2010 Session with ID :
</I>&gt;<i> pcscf.centercall.net;4000988146;2 attempted to request more bandwidth
</I>&gt;<i> than the requested QoS class can handle.
</I>&gt;<i> 
</I>&gt;<i> INFO: Sending DIAMETER AAA message to P-CSCF
</I>&gt;<i> INFO: Codecs authorised
</I>&gt;<i> INFO: Originating and Destination Domains authorised
</I>&gt;<i> INFO: Session ID: pcscf.centercall.net;4000988146;3 does not exist
</I>&gt;<i> 
</I>&gt;<i> INFO: Mon Feb 08 11:33:48 EST 2010 Session with ID :
</I>&gt;<i> pcscf.centercall.net;4000988146;3 attempted to request more bandwidth
</I>&gt;<i> than the requested QoS class can handle.
</I>&gt;<i> 
</I>&gt;<i> INFO: Sending DIAMETER AAA message to P-CSCF
</I>&gt;<i> 
</I>&gt;<i> --------------------------------------------------
</I>&gt;<i> 
</I>&gt;<i> INFO: Received STR DIAMETER message from P-CSCF
</I>&gt;<i> DEBUGGING: Session ID: pcscf.centercall.net;4000988146;3
</I>&gt;<i> Exception in thread &quot;Thread-4&quot; java.lang.NullPointerException
</I>&gt;<i>         at pcrf.xcap.getIPFlows(xcap.java:1219)
</I>&gt;<i>         at
</I>&gt;<i> pcrf.DecisionEngine.termination_request(DecisionEngine.java:548)
</I>&gt;<i>         at
</I>&gt;<i> de.fhg.fokus.pcrf_diam.rx.STRCommandListener.recvMessage(STRCommandListe
</I>&gt;<i> ner.java:145)
</I>&gt;<i>         at
</I>&gt;<i> de.fhg.fokus.diameter.DiameterPeer.DiameterWorker.run(DiameterWorker.jav
</I>&gt;<i> a:100)
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Kind regards.
</I>&gt;<i> 
</I>&gt;<i> Min Wang
</I>&gt;<i> 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Best regards,
</I>&gt;<i> &gt; Ancuta
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; On Fri, 2010-02-05 at 17:36 +0100, Min Wang wrote:
</I>&gt;<i> &gt; &gt; HI Ancuta
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; thanks!
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Kind regards
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Min Wang
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; -----Original Message-----
</I>&gt;<i> &gt; &gt; From: <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-cscf">openimscore-cscf-bounces at lists.berlios.de</A> on behalf of Andreea
</I>&gt;<i> &gt; &gt; Ancuta Onofrei
</I>&gt;<i> &gt; &gt; Sent: Fri 2/5/2010 12:40 PM
</I>&gt;<i> &gt; &gt; To: <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-cscf">openimscore-cscf at lists.berlios.de</A>
</I>&gt;<i> &gt; &gt; Subject: [OpenIMSCore-CSCF] 2. Re: About pcc, p-cscf crash (Min
</I>&gt;<i> Wang)
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Yup, that is just one of the problems.
</I>&gt;<i> &gt; &gt; I am working on fixing it and other problems related to PCC.
</I>&gt;<i> &gt; &gt; Please have a little bit of patience.
</I>&gt;<i> &gt; &gt; If you want a run without crashes, please disable the PCC related
</I>&gt;<i> &gt; &gt; functions on the terminating leg.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; I will let you know when this is safe to use :D.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Best regards,
</I>&gt;<i> &gt; &gt; Ancuta
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; On Fri, 2010-02-05 at 12:01 +0100,
</I>&gt;<i> &gt; &gt; <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-cscf">openimscore-cscf-request at lists.berlios.de</A> wrote:
</I>&gt;<i> &gt; &gt; &gt; 2. Re: About pcc, p-cscf crash (Min Wang)
</I>&gt;<i> &gt; &gt; _______________________________________________
</I>&gt;<i> &gt; &gt; OpenIMSCore-CSCF mailing list
</I>&gt;<i> &gt; &gt; <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-cscf">OpenIMSCore-CSCF at lists.berlios.de</A>
</I>&gt;<i> &gt; &gt; <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-cscf">https://lists.berlios.de/mailman/listinfo/openimscore-cscf</A>
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002076.html">[OpenIMSCore-CSCF] 2. Re: About pcc, p-cscf crash (Min Wang)
</A></li>
	<LI>Next message: <A HREF="002087.html">[OpenIMSCore-CSCF] 2. Re: About pcc, p-cscf crash (Min Wang)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2080">[ date ]</a>
              <a href="thread.html#2080">[ thread ]</a>
              <a href="subject.html#2080">[ subject ]</a>
              <a href="author.html#2080">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openimscore-cscf">More information about the OpenIMSCore-CSCF
mailing list</a><br>
</body></html>
