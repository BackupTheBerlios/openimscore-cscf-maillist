<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [OpenIMSCore-CSCF] [SVN-ser_ims] r655 - P-CSCF: modified the	p_dialog structure to include emergency service	information:emergency or non-emergency dialog,	the SIP URI of the selected  E-CSCF,	if emergency one P-CSCF: updated P_save_dialog to set if a dialog is	an emergency one and P_enforce_sos_routes to store the E-CSCF	URI to which the INVITE was forwarded P-CSCF: removed	P_is_anonymous_identity because it is easier from the script	updated the scripts added a sipp script for generating an	anonymous emergency call
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openimscore-cscf/2009-April/index.html" >
   <LINK REL="made" HREF="mailto:openimscore-cscf%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-CSCF%5D%20%5BSVN-ser_ims%5D%20r655%20-%20P-CSCF%3A%20modified%20the%0A%09p_dialog%20structure%20to%20include%20emergency%20service%0A%09information%3Aemergency%20or%20non-emergency%20dialog%2C%0A%09the%20SIP%20URI%20of%20the%20selected%20%20E-CSCF%2C%0A%09if%20emergency%20one%20P-CSCF%3A%20updated%20P_save_dialog%20to%20set%20if%20a%20dialog%20is%0A%09an%20emergency%20one%20and%20P_enforce_sos_routes%20to%20store%20the%20E-CSCF%0A%09URI%20to%20which%20the%20INVITE%20was%20forwarded%20P-CSCF%3A%20removed%0A%09P_is_anonymous_identity%20because%20it%20is%20easier%20from%20the%20script%0A%09updated%20the%20scripts%20added%20a%20sipp%20script%20for%20generating%20an%0A%09anonymous%20emergency%20call&In-Reply-To=%3C200904231532.n3NFW0ak002636%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001684.html">
   <LINK REL="Next"  HREF="001687.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[OpenIMSCore-CSCF] [SVN-ser_ims] r655 - P-CSCF: modified the	p_dialog structure to include emergency service	information:emergency or non-emergency dialog,	the SIP URI of the selected  E-CSCF,	if emergency one P-CSCF: updated P_save_dialog to set if a dialog is	an emergency one and P_enforce_sos_routes to store the E-CSCF	URI to which the INVITE was forwarded P-CSCF: removed	P_is_anonymous_identity because it is easier from the script	updated the scripts added a sipp script for generating an	anonymous emergency call</H1>
    <B>aon at users.berlios.de</B> 
    <A HREF="mailto:openimscore-cscf%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-CSCF%5D%20%5BSVN-ser_ims%5D%20r655%20-%20P-CSCF%3A%20modified%20the%0A%09p_dialog%20structure%20to%20include%20emergency%20service%0A%09information%3Aemergency%20or%20non-emergency%20dialog%2C%0A%09the%20SIP%20URI%20of%20the%20selected%20%20E-CSCF%2C%0A%09if%20emergency%20one%20P-CSCF%3A%20updated%20P_save_dialog%20to%20set%20if%20a%20dialog%20is%0A%09an%20emergency%20one%20and%20P_enforce_sos_routes%20to%20store%20the%20E-CSCF%0A%09URI%20to%20which%20the%20INVITE%20was%20forwarded%20P-CSCF%3A%20removed%0A%09P_is_anonymous_identity%20because%20it%20is%20easier%20from%20the%20script%0A%09updated%20the%20scripts%20added%20a%20sipp%20script%20for%20generating%20an%0A%09anonymous%20emergency%20call&In-Reply-To=%3C200904231532.n3NFW0ak002636%40sheep.berlios.de%3E"
       TITLE="[OpenIMSCore-CSCF] [SVN-ser_ims] r655 - P-CSCF: modified the	p_dialog structure to include emergency service	information:emergency or non-emergency dialog,	the SIP URI of the selected  E-CSCF,	if emergency one P-CSCF: updated P_save_dialog to set if a dialog is	an emergency one and P_enforce_sos_routes to store the E-CSCF	URI to which the INVITE was forwarded P-CSCF: removed	P_is_anonymous_identity because it is easier from the script	updated the scripts added a sipp script for generating an	anonymous emergency call">aon at users.berlios.de
       </A><BR>
    <I>Thu Apr 23 17:32:00 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="001684.html">[OpenIMSCore-CSCF] [SVN-ser_ims] r654 - added del_nonshm_lumps in	sip.c E-CSCF: fixed a bug: when the INVITE is forwarded to	the PSAP, some lumps are added,	but they are in pkg and when an error response was generated (e.g.	408 Request Timeout) or received,	the function run_failure_handlers was considering the add_rm lump and	trying to free it,	because the flags of the memory chunck had invalid value (memory	thread specific accessed from another thread),	causing an error. Now the pkg lumps are deleted after relaying the	request.
</A></li>
        <LI>Next message: <A HREF="001687.html">[OpenIMSCore-CSCF] [SVN-ser_ims] r656 - revised the implementation	of the anonymous calls: added a flag in the e_dialog info to	distinguish between anonymous and non-anonymous calls,	when an anonymous call is generated the E-CSCF sents the request-uri	of the OPTIONS to sip:anonymous at domain.org,	so that the LRF will recognize it as beeing for an anonymous call for	anonymous calls no ESQK is allocated,	and no ESQK header is added in the forwarded INVITE readded the	P_is_anonymous_user in the P-CSCF,	searching for the &quot;Anonymous&quot; display name in the From header,	as in RFC 3261 updated the testing and running scripts
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1685">[ date ]</a>
              <a href="thread.html#1685">[ thread ]</a>
              <a href="subject.html#1685">[ subject ]</a>
              <a href="author.html#1685">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: aon
Date: 2009-04-23 17:31:52 +0200 (Thu, 23 Apr 2009)
New Revision: 655 <A HREF="http://svn.berlios.de/viewcvs/openimscore?view=rev&amp;rev=655">http://svn.berlios.de/viewcvs/openimscore?view=rev&amp;rev=655</A> 

Log:
P-CSCF: modified the p_dialog structure to include emergency service information:emergency or non-emergency dialog, the SIP URI of the selected 
E-CSCF, if emergency one
P-CSCF: updated P_save_dialog to set if a dialog is an emergency one and P_enforce_sos_routes to store the E-CSCF URI to which the INVITE was 
forwarded
P-CSCF: removed P_is_anonymous_identity because it is easier from the script
updated the scripts
added a sipp script for generating an anonymous emergency call


Added:
   A	ser_ims/branches/12_em_services/test/emerg_serv/em_uac_anonym.xml
		<A HREF="http://svn.berlios.de/viewcvs/openimscore/ser_ims/branches/12_em_services/test/emerg_serv/em_uac_anonym.xml?rev=655&amp;view=markup">http://svn.berlios.de/viewcvs/openimscore/ser_ims/branches/12_em_services/test/emerg_serv/em_uac_anonym.xml?rev=655&amp;view=markup</A>
Modified:
   U	ser_ims/branches/12_em_services/cfg/ecscf.cfg
		<A HREF="http://svn.berlios.de/viewcvs/openimscore/ser_ims/branches/12_em_services/cfg/ecscf.cfg?rev=655&amp;view=diff&amp;r1=655&amp;r2=654">http://svn.berlios.de/viewcvs/openimscore/ser_ims/branches/12_em_services/cfg/ecscf.cfg?rev=655&amp;view=diff&amp;r1=655&amp;r2=654</A>
   U	ser_ims/branches/12_em_services/cfg/lrf.cfg
		<A HREF="http://svn.berlios.de/viewcvs/openimscore/ser_ims/branches/12_em_services/cfg/lrf.cfg?rev=655&amp;view=diff&amp;r1=655&amp;r2=654">http://svn.berlios.de/viewcvs/openimscore/ser_ims/branches/12_em_services/cfg/lrf.cfg?rev=655&amp;view=diff&amp;r1=655&amp;r2=654</A>
   U	ser_ims/branches/12_em_services/cfg/pcscf.cfg
		<A HREF="http://svn.berlios.de/viewcvs/openimscore/ser_ims/branches/12_em_services/cfg/pcscf.cfg?rev=655&amp;view=diff&amp;r1=655&amp;r2=654">http://svn.berlios.de/viewcvs/openimscore/ser_ims/branches/12_em_services/cfg/pcscf.cfg?rev=655&amp;view=diff&amp;r1=655&amp;r2=654</A>
   U	ser_ims/branches/12_em_services/modules/ecscf/mod.c
		<A HREF="http://svn.berlios.de/viewcvs/openimscore/ser_ims/branches/12_em_services/modules/ecscf/mod.c?rev=655&amp;view=diff&amp;r1=655&amp;r2=654">http://svn.berlios.de/viewcvs/openimscore/ser_ims/branches/12_em_services/modules/ecscf/mod.c?rev=655&amp;view=diff&amp;r1=655&amp;r2=654</A>
   U	ser_ims/branches/12_em_services/modules/pcscf/dlg_state.c
		<A HREF="http://svn.berlios.de/viewcvs/openimscore/ser_ims/branches/12_em_services/modules/pcscf/dlg_state.c?rev=655&amp;view=diff&amp;r1=655&amp;r2=654">http://svn.berlios.de/viewcvs/openimscore/ser_ims/branches/12_em_services/modules/pcscf/dlg_state.c?rev=655&amp;view=diff&amp;r1=655&amp;r2=654</A>
   U	ser_ims/branches/12_em_services/modules/pcscf/dlg_state.h
		<A HREF="http://svn.berlios.de/viewcvs/openimscore/ser_ims/branches/12_em_services/modules/pcscf/dlg_state.h?rev=655&amp;view=diff&amp;r1=655&amp;r2=654">http://svn.berlios.de/viewcvs/openimscore/ser_ims/branches/12_em_services/modules/pcscf/dlg_state.h?rev=655&amp;view=diff&amp;r1=655&amp;r2=654</A>
   U	ser_ims/branches/12_em_services/modules/pcscf/emerg.c
		<A HREF="http://svn.berlios.de/viewcvs/openimscore/ser_ims/branches/12_em_services/modules/pcscf/emerg.c?rev=655&amp;view=diff&amp;r1=655&amp;r2=654">http://svn.berlios.de/viewcvs/openimscore/ser_ims/branches/12_em_services/modules/pcscf/emerg.c?rev=655&amp;view=diff&amp;r1=655&amp;r2=654</A>
   U	ser_ims/branches/12_em_services/modules/pcscf/emerg.h
		<A HREF="http://svn.berlios.de/viewcvs/openimscore/ser_ims/branches/12_em_services/modules/pcscf/emerg.h?rev=655&amp;view=diff&amp;r1=655&amp;r2=654">http://svn.berlios.de/viewcvs/openimscore/ser_ims/branches/12_em_services/modules/pcscf/emerg.h?rev=655&amp;view=diff&amp;r1=655&amp;r2=654</A>
   U	ser_ims/branches/12_em_services/modules/pcscf/mod.c
		<A HREF="http://svn.berlios.de/viewcvs/openimscore/ser_ims/branches/12_em_services/modules/pcscf/mod.c?rev=655&amp;view=diff&amp;r1=655&amp;r2=654">http://svn.berlios.de/viewcvs/openimscore/ser_ims/branches/12_em_services/modules/pcscf/mod.c?rev=655&amp;view=diff&amp;r1=655&amp;r2=654</A>
   U	ser_ims/branches/12_em_services/modules/pcscf/registration.c
		<A HREF="http://svn.berlios.de/viewcvs/openimscore/ser_ims/branches/12_em_services/modules/pcscf/registration.c?rev=655&amp;view=diff&amp;r1=655&amp;r2=654">http://svn.berlios.de/viewcvs/openimscore/ser_ims/branches/12_em_services/modules/pcscf/registration.c?rev=655&amp;view=diff&amp;r1=655&amp;r2=654</A>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001684.html">[OpenIMSCore-CSCF] [SVN-ser_ims] r654 - added del_nonshm_lumps in	sip.c E-CSCF: fixed a bug: when the INVITE is forwarded to	the PSAP, some lumps are added,	but they are in pkg and when an error response was generated (e.g.	408 Request Timeout) or received,	the function run_failure_handlers was considering the add_rm lump and	trying to free it,	because the flags of the memory chunck had invalid value (memory	thread specific accessed from another thread),	causing an error. Now the pkg lumps are deleted after relaying the	request.
</A></li>
	<LI>Next message: <A HREF="001687.html">[OpenIMSCore-CSCF] [SVN-ser_ims] r656 - revised the implementation	of the anonymous calls: added a flag in the e_dialog info to	distinguish between anonymous and non-anonymous calls,	when an anonymous call is generated the E-CSCF sents the request-uri	of the OPTIONS to sip:anonymous at domain.org,	so that the LRF will recognize it as beeing for an anonymous call for	anonymous calls no ESQK is allocated,	and no ESQK header is added in the forwarded INVITE readded the	P_is_anonymous_user in the P-CSCF,	searching for the &quot;Anonymous&quot; display name in the From header,	as in RFC 3261 updated the testing and running scripts
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1685">[ date ]</a>
              <a href="thread.html#1685">[ thread ]</a>
              <a href="subject.html#1685">[ subject ]</a>
              <a href="author.html#1685">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openimscore-cscf">More information about the OpenIMSCore-CSCF
mailing list</a><br>
</body></html>
