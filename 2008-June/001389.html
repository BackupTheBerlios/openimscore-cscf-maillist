<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [OpenIMSCore-CSCF] [Call Session Control Functions bug] Port number	in request URI initial INVITE fails
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openimscore-cscf/2008-June/index.html" >
   <LINK REL="made" HREF="mailto:openimscore-cscf%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-CSCF%5D%20%5BCall%20Session%20Control%20Functions%20bug%5D%20Port%20number%0A%09in%20request%20URI%20initial%20INVITE%20fails&In-Reply-To=%3Ctype%3Dproject%26nid%3D133%26host%3D%40www.openimscore.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001388.html">
   <LINK REL="Next"  HREF="001390.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[OpenIMSCore-CSCF] [Call Session Control Functions bug] Port number	in request URI initial INVITE fails</H1>
    <B>eelco</B> 
    <A HREF="mailto:openimscore-cscf%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-CSCF%5D%20%5BCall%20Session%20Control%20Functions%20bug%5D%20Port%20number%0A%09in%20request%20URI%20initial%20INVITE%20fails&In-Reply-To=%3Ctype%3Dproject%26nid%3D133%26host%3D%40www.openimscore.org%3E"
       TITLE="[OpenIMSCore-CSCF] [Call Session Control Functions bug] Port number	in request URI initial INVITE fails">vingarzan at fokus.fraunhofer.de
       </A><BR>
    <I>Thu Jun  5 13:52:02 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001388.html">[OpenIMSCore-CSCF] [SVN-ser_ims] r565 - Added Sebastian Felis	patches for building the debian package.
</A></li>
        <LI>Next message: <A HREF="001390.html">[OpenIMSCore-CSCF] [SVN-ser_ims] r566 - Fixed the P-CSCF crash due	to just one pinhole on REGISTER with multiple contacts.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1389">[ date ]</a>
              <a href="thread.html#1389">[ thread ]</a>
              <a href="subject.html#1389">[ subject ]</a>
              <a href="author.html#1389">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Issue status update for 
<A HREF="http://www.openimscore.org/node/133">http://www.openimscore.org/node/133</A>
Post a follow up: 
<A HREF="http://www.openimscore.org/project/comments/add/133">http://www.openimscore.org/project/comments/add/133</A>

 Project:      Call Session Control Functions
 Version:      &lt;none&gt;
 Component:    Code
 Category:     bug reports
 Priority:     normal
 Assigned to:  
 Reported by:  eelco
 Updated by:   eelco
 Status:       active

When our MGW sends an intial INVITE message to the ICSCF the ICSCF does
not handle the call correctly. After analyzing the problem whe noticed
that the reason for this is that the request URI of the INVITE contains
a portnumber:

INVITE sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-cscf">01234 at openims.org</A>:5060 SIP/2.0



I believe that this request is conform the SIP specifications. 


We added a rewriterule to the configuration of the ICSCF to temporarly
fix this issue. We put this after the route sanity checks in the main
routing logic:

        if (uri =~ &quot;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-cscf">.+ at openims.org</A>:5060&quot;) {
                log(1, &quot;port found in request URI, rewriting...&quot;);
                rewritehostport(&quot;openims.org&quot;);
        }





eelco


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001388.html">[OpenIMSCore-CSCF] [SVN-ser_ims] r565 - Added Sebastian Felis	patches for building the debian package.
</A></li>
	<LI>Next message: <A HREF="001390.html">[OpenIMSCore-CSCF] [SVN-ser_ims] r566 - Fixed the P-CSCF crash due	to just one pinhole on REGISTER with multiple contacts.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1389">[ date ]</a>
              <a href="thread.html#1389">[ thread ]</a>
              <a href="subject.html#1389">[ subject ]</a>
              <a href="author.html#1389">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openimscore-cscf">More information about the OpenIMSCore-CSCF
mailing list</a><br>
</body></html>
