<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [OpenIMSCore-CSCF] Problem with Call Transfer (REFER)
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openimscore-cscf/2008-July/index.html" >
   <LINK REL="made" HREF="mailto:openimscore-cscf%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-CSCF%5D%20Problem%20with%20Call%20Transfer%20%28REFER%29&In-Reply-To=%3C487E3D1E.8010109%40fokus.fraunhofer.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001416.html">
   <LINK REL="Next"  HREF="001411.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[OpenIMSCore-CSCF] Problem with Call Transfer (REFER)</H1>
    <B>Dragos Vingarzan</B> 
    <A HREF="mailto:openimscore-cscf%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-CSCF%5D%20Problem%20with%20Call%20Transfer%20%28REFER%29&In-Reply-To=%3C487E3D1E.8010109%40fokus.fraunhofer.de%3E"
       TITLE="[OpenIMSCore-CSCF] Problem with Call Transfer (REFER)">Dragos.Vingarzan at fokus.fraunhofer.de
       </A><BR>
    <I>Wed Jul 16 20:25:34 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001416.html">[OpenIMSCore-CSCF] Problem with Call Transfer (REFER)
</A></li>
        <LI>Next message: <A HREF="001411.html">[OpenIMSCore-CSCF] trouble with the IMS client
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1419">[ date ]</a>
              <a href="thread.html#1419">[ thread ]</a>
              <a href="subject.html#1419">[ subject ]</a>
              <a href="author.html#1419">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Yes, the reason for that is that the Request-URI in the REFER is 
incorrect. It should be the Contact address of the other end of the 
dialog. The REFER is in the dialog with INVITE, so this should be fixed 
on the client.

The Request-URI should be same as the Contact in the 200 OK.

BTW: the error case is quite misleading... which makes me want an 
OpenIMSCore revamp... Anyone interested in financing such a thing, or we 
think that what we have now is good enough?

Cheers,
-Dragos

Franz Edler wrote:
&gt;<i> Hi Raphael,
</I>&gt;<i>
</I>&gt;<i>   
</I>&gt;&gt;<i> I linked the PCSCF trace like you asked.
</I>&gt;&gt;<i>     
</I>&gt;<i>
</I>&gt;<i> Once again I reconsidered the scenario and found that the previously
</I>&gt;<i> mentioned log-statement:
</I>&gt;<i>
</I>&gt;<i>    DBG:P-CSCF:P_mobile_terminating: Term indication not found in
</I>&gt;<i> &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-cscf">mt at pcscf.open-ims.test</A>:4060&gt; as &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-cscf">term at pcscf.open-ims.test</A>:4060&gt;
</I>&gt;<i>
</I>&gt;<i> is correct. The REFER request when it passes the P-CSCF for the second time
</I>&gt;<i> is not a new arriving terminating request, but it is a terminating request
</I>&gt;<i> within an existing dialog. But there seems to be an issue with the dialog
</I>&gt;<i> data. The log-statement
</I>&gt;<i>
</I>&gt;<i>    DBG:P-CSCF:cscf_get_terminating_contact: 1://open-ims.test:0
</I>&gt;<i>
</I>&gt;<i> looks suspicious. It obviously causes the REFER request to be handled as an
</I>&gt;<i> &quot;Orig_Standalone&quot; request which is not correct and causes the rejection.
</I>&gt;<i> I still don't have a clear picture, maybe I can continue my analyzing in the
</I>&gt;<i> evening. 
</I>&gt;<i>
</I>&gt;<i> Franz
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> OpenIMSCore-CSCF mailing list
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-cscf">OpenIMSCore-CSCF at lists.berlios.de</A>
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-cscf">https://lists.berlios.de/mailman/listinfo/openimscore-cscf</A>
</I>&gt;<i>
</I>&gt;<i>   
</I>

-- 
-----------------------------------------
Dipl. Eng. Dragos Vingarzan
Fraunhofer FOKUS/NGNI
Kaiserin-Augusta-Allee 31
10589 Berlin,Germany
Phone +49 (0)30 - 3463 - 7385
Mobile +49 (0)176 - 48 32 16 00
Web www.fokus.fraunhofer.de www.openimscore.org
We could change the world if God would give us the source code...
-----------------------------------------------------------------


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001416.html">[OpenIMSCore-CSCF] Problem with Call Transfer (REFER)
</A></li>
	<LI>Next message: <A HREF="001411.html">[OpenIMSCore-CSCF] trouble with the IMS client
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1419">[ date ]</a>
              <a href="thread.html#1419">[ thread ]</a>
              <a href="subject.html#1419">[ subject ]</a>
              <a href="author.html#1419">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openimscore-cscf">More information about the OpenIMSCore-CSCF
mailing list</a><br>
</body></html>
